@model List<ConsultasPsicologiaMVC.Models.PacienteViewModel>

@{
    ViewData["Title"] = "Gestão de Pacientes";
}

<h1>Gestão de Pacientes</h1>

<div style="height: 400px; overflow-y: auto;">
    <table class="table table-striped table-bordered">
        <thead class="thead-dark">
            <tr>
                <th>
                    Nome Completo
                    <i class="fas fa-filter filter-icon" data-filter-for="NomeCompleto"></i>
                    <div class="filter-dropdown" id="filterDropdownNomeCompleto">
                        <select class="form-select filter-type" id="filterNomeCompletoType">
                            <option value="contains">Contém</option>
                            <option value="equals">É igual a</option>
                        </select>
                        <input type="text" class="form-control mt-2" id="filterNomeCompleto" placeholder="Filtrar Nome">
                        <button class="btn btn-primary btn-sm mt-2 apply-filter-btn" data-filter-id="NomeCompleto">Aplicar</button>
                        <button class="btn btn-secondary btn-sm mt-2 clear-filter-btn" data-filter-id="NomeCompleto">Limpar</button>
                    </div>
                </th>
                <th>
                    Data de Nascimento
                    <i class="fas fa-filter filter-icon" data-filter-for="DataNascimento"></i>
                    <div class="filter-dropdown" id="filterDropdownDataNascimento">
                        <select class="form-select filter-type" id="filterDataNascimentoType">
                            <option value="equals">É igual a</option>
                        </select>
                        <input type="text" class="form-control mt-2 datepicker" id="filterDataNascimento" placeholder="DD/MM/AAAA">
                        <button class="btn btn-primary btn-sm mt-2 apply-filter-btn" data-filter-id="DataNascimento">Aplicar</button>
                        <button class="btn btn-secondary btn-sm mt-2 clear-filter-btn" data-filter-id="DataNascimento">Limpar</button>
                    </div>
                </th>
                <th>
                    Email
                    <i class="fas fa-filter filter-icon" data-filter-for="Email"></i>
                    <div class="filter-dropdown" id="filterDropdownEmail">
                        <select class="form-select filter-type" id="filterEmailType">
                            <option value="contains">Contém</option>
                            <option value="equals">É igual a</option>
                        </select>
                        <input type="text" class="form-control mt-2" id="filterEmail" placeholder="Filtrar Email">
                        <button class="btn btn-primary btn-sm mt-2 apply-filter-btn" data-filter-id="Email">Aplicar</button>
                        <button class="btn btn-secondary btn-sm mt-2 clear-filter-btn" data-filter-id="Email">Limpar</button>
                    </div>
                </th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody id="pacientesTableBody">
            @await Html.PartialAsync("_PacienteTableRows", Model)
        </tbody>
    </table>
</div>

<nav aria-label="Page navigation">
    <ul class="pagination justify-content-center" id="paginationControls">
        <!-- Pagination links will be inserted here by JavaScript -->
    </ul>
</nav>

@section Scripts {
    <script src="~/js/admin.js" asp-append-version="true"></script>
    <script>
        $(document).ready(function () {
            flatpickr(".datepicker", {
                dateFormat: "d/m/Y",
                locale: "pt",
                allowInput: true
            });
        });
    </script>
}